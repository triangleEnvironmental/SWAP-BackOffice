<script setup>
import {Head} from '@inertiajs/inertia-vue3';
import LayoutAuthenticated from '@/Layouts/LayoutAuthenticated.vue'
import SectionMain from '@/Components/SectionMain.vue'
import CardBox from '@/Components/CardBox.vue'
import SectionTitleBar from '@/Components/SectionTitleBar.vue'
import SectionHeroBar from '@/Components/SectionHeroBar.vue'
import DeleteUserForm from '@/Pages/Profile/Partials/DeleteUserForm.vue';
import JetSectionBorder from '@/Jetstream/SectionBorder.vue';
import LogoutOtherBrowserSessionsForm from '@/Pages/Profile/Partials/LogoutOtherBrowserSessionsForm.vue';
import TwoFactorAuthenticationForm from '@/Pages/Profile/Partials/TwoFactorAuthenticationForm.vue';
import UpdatePasswordForm from '@/Pages/Profile/Partials/UpdatePasswordForm.vue';
import UpdateProfileInformationForm from '@/Pages/Profile/Partials/UpdateProfileInformationForm.vue';
import {ref} from "vue";
import useRefreshNavigation from "@/Composibles/useRefreshNavigation";

const titleStack = ref(['Backoffice', 'Profile'])

defineProps({
  confirmsTwoFactorAuthentication: Boolean,
  sessions: Array,
});

useRefreshNavigation();
</script>

<template>
  <LayoutAuthenticated>
    <Head title="Profile"/>
    <SectionTitleBar :title-stack="titleStack" />

    <div>
      <div class="max-w-7xl mx-auto py-10 sm:px-6 lg:px-8">
        <div v-if="$page.props.jetstream.canUpdateProfileInformation">
          <UpdateProfileInformationForm :user="$page.props.user"/>

          <JetSectionBorder/>
        </div>

        <div v-if="$page.props.jetstream.canUpdatePassword">
          <UpdatePasswordForm class="mt-10 sm:mt-0"/>

          <JetSectionBorder/>
        </div>

        <div v-if="$page.props.jetstream.canManageTwoFactorAuthentication">
          <TwoFactorAuthenticationForm
            :requires-confirmation="confirmsTwoFactorAuthentication"
            class="mt-10 sm:mt-0"
          />

          <JetSectionBorder/>
        </div>

        <LogoutOtherBrowserSessionsForm :sessions="sessions" class="mt-10 sm:mt-0"/>

        <template v-if="$page.props.jetstream.hasAccountDeletionFeatures">
          <JetSectionBorder/>

          <DeleteUserForm class="mt-10 sm:mt-0"/>
        </template>
      </div>
    </div>
  </LayoutAuthenticated>
</template>
